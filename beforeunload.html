<!DOCTYPE html>

<html>

<head>

<meta charset="UTF-8">

<title>微信关闭</title>

<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    pushHistory(); 
    window.addEventListener("popstate", function(e) { 
        alert("我监听到了浏览器的返回按钮事件啦");//根据自己的需求实现自己的功能
        var ua = navigator.userAgent.toLowerCase(); 
            if(ua.match(/MicroMessenger/i)=="micromessenger") { 
                WeixinJSBridge.call('closeWindow'); //微信
            } else{ 
                window.close(); //普通浏览器
            }
        }, false);
        function pushHistory() { 
            var state = { 
                title: "title", 
                url: "#"
            }; 
            window.history.pushState(state, "title", "#"); 
    }
});
</script>   

</head>

<body>

  试试关闭之前！

  <a href="http://www.baidu.com" style="font-size:40px;">11111111</a>

</body>

</html>
